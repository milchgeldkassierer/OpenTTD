# Ultimate OpenTTD AI Architecture Document

## Table of Contents

- [Ultimate OpenTTD AI Architecture Document](#table-of-contents)
  - [Introduction](./introduction.md)
    - [Starter Template or Existing Project](./introduction.md#starter-template-or-existing-project)
    - [Change Log](./introduction.md#change-log)
  - [High Level Architecture](./high-level-architecture.md)
    - [Technical Summary](./high-level-architecture.md#technical-summary)
    - [High Level Overview](./high-level-architecture.md#high-level-overview)
    - [High Level Project Diagram](./high-level-architecture.md#high-level-project-diagram)
    - [Architectural and Design Patterns](./high-level-architecture.md#architectural-and-design-patterns)
  - [Tech Stack](./tech-stack.md)
    - [Cloud Infrastructure](./tech-stack.md#cloud-infrastructure)
    - [Technology Stack Table](./tech-stack.md#technology-stack-table)
  - [Data Models](./data-models.md)
    - [RouteCandidate](./data-models.md#routecandidate)
    - [FinancialSnapshot](./data-models.md#financialsnapshot)
    - [RouteData](./data-models.md#routedata)
  - [Components](./components.md)
    - [UltimateMoneyAI (Main Controller)](./components.md#ultimatemoneyai-main-controller)
    - [FinanceManager](./components.md#financemanager)
    - [IndustryScanner](./components.md#industryscanner)
    - [RouteEvaluator](./components.md#routeevaluator)
    - [RouteBuilder](./components.md#routebuilder)
    - [RouteManager](./components.md#routemanager)
    - [PerformanceLogger](./components.md#performancelogger)
    - [Component Diagrams](./components.md#component-diagrams)
  - [External APIs](./external-apis.md)
  - [Core Workflows](./core-workflows.md)
    - [AI Initialization and Capital Deployment](./core-workflows.md#ai-initialization-and-capital-deployment)
    - [Route Discovery and ROI-Based Selection](./core-workflows.md#route-discovery-and-roi-based-selection)
    - [Route Construction and Vehicle Deployment](./core-workflows.md#route-construction-and-vehicle-deployment)
    - [Monthly Performance Monitoring and Analysis](./core-workflows.md#monthly-performance-monitoring-and-analysis)
  - [Database Schema](./database-schema.md)
    - [Data Storage Architecture](./database-schema.md#data-storage-architecture)
    - [Persistent Storage Strategy](./database-schema.md#persistent-storage-strategy)
    - [Data Integrity Approach](./database-schema.md#data-integrity-approach)
  - [Source Tree](./source-tree.md)
  - [Infrastructure and Deployment](./infrastructure-and-deployment.md)
    - [Infrastructure as Code](./infrastructure-and-deployment.md#infrastructure-as-code)
    - [Deployment Strategy](./infrastructure-and-deployment.md#deployment-strategy)
    - [Environments](./infrastructure-and-deployment.md#environments)
    - [Environment Promotion Flow](./infrastructure-and-deployment.md#environment-promotion-flow)
    - [Rollback Strategy](./infrastructure-and-deployment.md#rollback-strategy)
  - [Error Handling Strategy](./error-handling-strategy.md)
    - [General Approach](./error-handling-strategy.md#general-approach)
    - [Logging Standards](./error-handling-strategy.md#logging-standards)
    - [Error Handling Patterns](./error-handling-strategy.md#error-handling-patterns)
      - [External API Errors](./error-handling-strategy.md#external-api-errors)
      - [Business Logic Errors](./error-handling-strategy.md#business-logic-errors)
      - [Data Consistency](./error-handling-strategy.md#data-consistency)
  - [Coding Standards](./coding-standards.md)
    - [General Principles](./coding-standards.md#general-principles)
      - [Memory Efficiency First](./coding-standards.md#memory-efficiency-first)
      - [Performance Within Limits](./coding-standards.md#performance-within-limits)
      - [Logging Integration](./coding-standards.md#logging-integration)
    - [Naming Conventions](./coding-standards.md#naming-conventions)
      - [Classes](./coding-standards.md#classes)
      - [Functions and Methods](./coding-standards.md#functions-and-methods)
      - [Variables](./coding-standards.md#variables)
      - [Constants](./coding-standards.md#constants)
      - [Files](./coding-standards.md#files)
    - [Code Structure](./coding-standards.md#code-structure)
      - [File Organization](./coding-standards.md#file-organization)
      - [Function Structure](./coding-standards.md#function-structure)
    - [Memory Management](./coding-standards.md#memory-management)
      - [Variable Scope](./coding-standards.md#variable-scope)
      - [Data Structure Cleanup](./coding-standards.md#data-structure-cleanup)
      - [OpenTTD API Efficiency](./coding-standards.md#openttd-api-efficiency)
    - [Error Handling](./coding-standards.md#error-handling)
      - [Standard Error Pattern](./coding-standards.md#standard-error-pattern)
      - [Error Code Standards](./coding-standards.md#error-code-standards)
    - [Logging Requirements](./coding-standards.md#logging-requirements)
      - [Mandatory Logging Points](./coding-standards.md#mandatory-logging-points)
      - [Log Format Consistency](./coding-standards.md#log-format-consistency)
    - [Performance Optimization](./coding-standards.md#performance-optimization)
      - [Integer Arithmetic](./coding-standards.md#integer-arithmetic)
      - [Loop Optimization](./coding-standards.md#loop-optimization)
      - [API Call Minimization](./coding-standards.md#api-call-minimization)
    - [Comments and Documentation](./coding-standards.md#comments-and-documentation)
      - [Function Documentation](./coding-standards.md#function-documentation)
      - [Inline Comments](./coding-standards.md#inline-comments)
      - [Complex Logic Explanation](./coding-standards.md#complex-logic-explanation)
    - [Security and Safety](./coding-standards.md#security-and-safety)
      - [Input Validation](./coding-standards.md#input-validation)
      - [Financial Safety](./coding-standards.md#financial-safety)
    - [Testing Patterns](./coding-standards.md#testing-patterns)
      - [Validation Functions](./coding-standards.md#validation-functions)
      - [State Verification](./coding-standards.md#state-verification)
    - [File Organization Best Practices](./coding-standards.md#file-organization-best-practices)
      - [Directory Structure](./coding-standards.md#directory-structure)
      - [Import Organization](./coding-standards.md#import-organization)
    - [Standards Enforcement](./coding-standards.md#standards-enforcement)
  - [Test Strategy and Standards](./test-strategy-and-standards.md)
    - [Testing Philosophy](./test-strategy-and-standards.md#testing-philosophy)
    - [Test Reality for Squirrel Scripts](./test-strategy-and-standards.md#test-reality-for-squirrel-scripts)
    - [In-Game Testing Strategy](./test-strategy-and-standards.md#in-game-testing-strategy)
      - [Manual Observation Testing](./test-strategy-and-standards.md#manual-observation-testing)
      - [Performance Testing](./test-strategy-and-standards.md#performance-testing)
      - [Debugging Approach](./test-strategy-and-standards.md#debugging-approach)
    - [Test Scenarios](./test-strategy-and-standards.md#test-scenarios)
  - [Security](./security.md)
    - [Input Validation](./security.md#input-validation)
    - [Authentication & Authorization](./security.md#authentication-authorization)
    - [Secrets Management](./security.md#secrets-management)
    - [API Security](./security.md#api-security)
    - [Data Protection](./security.md#data-protection)
    - [Dependency Security](./security.md#dependency-security)
    - [Security Testing](./security.md#security-testing)
  - [Next Steps](./next-steps.md)
    - [For Development Implementation:](./next-steps.md#for-development-implementation)
    - [For System Architecture:](./next-steps.md#for-system-architecture)
    - [Next Agent Handoffs:](./next-steps.md#next-agent-handoffs)
